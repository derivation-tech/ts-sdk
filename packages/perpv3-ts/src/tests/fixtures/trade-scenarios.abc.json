[
    {
        "name": "abc-trade-margin-long",
        "type": "margin",
        "signedSize": "12000000000000000",
        "quotation": {
            "benchmark": "153660000000000000000",
            "sqrtFairPX96": "982112590742975838296897558209",
            "tick": 50349,
            "mark": "153660000000000000000",
            "entryNotional": "1843934968323275175",
            "fee": "1290754477826293",
            "minAmount": "185697722801101468",
            "sqrtPostFairPX96": "982114771318799292974792295018",
            "postTick": 50350
        },
        "context": {
            "setting": {
                "symbol": "SOL-USDM-EMG",
                "config": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "gate": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "market": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "initialMarginRatio": 1000,
                "maintenanceMarginRatio": 500,
                "placePaused": false,
                "fundingHour": 24,
                "disableOrderRebate": false,
                "param": {
                    "minMarginAmount": "1000000000000000000",
                    "tradingFeeRatio": 4,
                    "protocolFeeRatio": 3,
                    "qtype": 1,
                    "tip": "100000000000000000"
                }
            },
            "amm": {
                "expiry": 4294967295,
                "timestamp": 1763048109,
                "status": 1,
                "tick": 50349,
                "sqrtPX96": "982112590742975838296897558209",
                "liquidity": "66996789455639740773358",
                "totalLiquidity": "66996789455639740773358",
                "totalShort": "109097610137968958168699",
                "openInterests": "111731544618802760799420",
                "totalLong": "109000582125878083343020",
                "involvedFund": "5394610613004000000000000",
                "feeIndex": "1132480572284542413",
                "protocolFee": "129093054174985816444341",
                "longSocialLossIndex": "0",
                "shortSocialLossIndex": "0",
                "longFundingIndex": "2920812895983985913539",
                "shortFundingIndex": "9749087299161150366",
                "insuranceFund": "206207465512564296",
                "settlementPrice": "0"
            },
            "spacing": {
                "pearl": 1,
                "order": 1,
                "range": 50
            },
            "priceData": {
                "instrument": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "expiry": 4294967295,
                "markPrice": "154050000000000000000",
                "spotPrice": "154050000000000000000",
                "benchmarkPrice": "154050000000000000000",
                "feeder0": "0x82a185a13f22b1816593d7e7e2f4f5aeb305b31b",
                "feeder1": "0x0000000000000000000000000000000000000000",
                "feeder0UpdatedAt": "1763047806",
                "feeder1UpdatedAt": "0"
            },
            "blockInfo": {
                "height": 693605,
                "timestamp": 1763048109
            },
            "portfolio": {
                "oids": [],
                "rids": [],
                "position": {
                    "balance": "0",
                    "size": "0",
                    "entryNotional": "0",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "0"
                },
                "orders": [],
                "ranges": [],
                "ordersTaken": []
            },
            "quoteState": {
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "symbol": "USDM",
                "threshold": "2000000000",
                "reserve": "0",
                "balance": "274289898342",
                "allowance": "115792089237316195423570985008687907853269984665640564039457584007913129639935",
                "fundFlow": {
                    "totalIn": "807710101658",
                    "totalOut": "0"
                },
                "pending": {
                    "timestamp": 0,
                    "native": false,
                    "amount": "0",
                    "exemption": "0"
                }
            }
        },
        "input": {
            "instrumentAddress": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
            "traderAddress": "0xA2917847890331339965af22Cc76d90E8fA23552",
            "baseQuantity": "12000000000000000",
            "side": 2,
            "margin": "60000000000000000000",
            "userSetting": {
                "deadline": 3600,
                "slippage": 50
            }
        },
        "expected": {
            "simulation": {
                "marginDelta": "60000000000000000000",
                "leverage": "30808267406095901",
                "realized": "0",
                "postPosition": {
                    "balance": "59998709245522173707",
                    "size": "12000000000000000",
                    "entryNotional": "1843934968323275175",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "2920812895983985913539"
                },
                "exceedMaxLeverage": false
            }
        }
    },
    {
        "name": "abc-trade-leverage-short",
        "type": "leverage",
        "signedSize": "-10000000000000000",
        "quotation": {
            "benchmark": "153660000000000000000",
            "sqrtFairPX96": "982112590742975838296897558209",
            "tick": 50349,
            "mark": "153660000000000000000",
            "entryNotional": "1536606218795417835",
            "fee": "1075624353156793",
            "minAmount": "154735624353156793",
            "sqrtPostFairPX96": "982110773603853018667593440129",
            "postTick": 50349
        },
        "context": {
            "setting": {
                "symbol": "SOL-USDM-EMG",
                "config": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "gate": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "market": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "initialMarginRatio": 1000,
                "maintenanceMarginRatio": 500,
                "placePaused": false,
                "fundingHour": 24,
                "disableOrderRebate": false,
                "param": {
                    "minMarginAmount": "1000000000000000000",
                    "tradingFeeRatio": 4,
                    "protocolFeeRatio": 3,
                    "qtype": 1,
                    "tip": "100000000000000000"
                }
            },
            "amm": {
                "expiry": 4294967295,
                "timestamp": 1763048109,
                "status": 1,
                "tick": 50349,
                "sqrtPX96": "982112590742975838296897558209",
                "liquidity": "66996789455639740773358",
                "totalLiquidity": "66996789455639740773358",
                "totalShort": "109097610137968958168699",
                "openInterests": "111731544618802760799420",
                "totalLong": "109000582125878083343020",
                "involvedFund": "5394610613004000000000000",
                "feeIndex": "1132480572284542413",
                "protocolFee": "129093054174985816444341",
                "longSocialLossIndex": "0",
                "shortSocialLossIndex": "0",
                "longFundingIndex": "2920812895983985913539",
                "shortFundingIndex": "9749087299161150366",
                "insuranceFund": "206207465512564296",
                "settlementPrice": "0"
            },
            "spacing": {
                "pearl": 1,
                "order": 1,
                "range": 50
            },
            "priceData": {
                "instrument": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "expiry": 4294967295,
                "markPrice": "154050000000000000000",
                "spotPrice": "154050000000000000000",
                "benchmarkPrice": "154050000000000000000",
                "feeder0": "0x82a185a13f22b1816593d7e7e2f4f5aeb305b31b",
                "feeder1": "0x0000000000000000000000000000000000000000",
                "feeder0UpdatedAt": "1763047806",
                "feeder1UpdatedAt": "0"
            },
            "blockInfo": {
                "height": 693605,
                "timestamp": 1763048109
            },
            "portfolio": {
                "oids": [],
                "rids": [],
                "position": {
                    "balance": "0",
                    "size": "0",
                    "entryNotional": "0",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "0"
                },
                "orders": [],
                "ranges": [],
                "ordersTaken": []
            },
            "quoteState": {
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "symbol": "USDM",
                "threshold": "2000000000",
                "reserve": "0",
                "balance": "274289898342",
                "allowance": "115792089237316195423570985008687907853269984665640564039457584007913129639935",
                "fundFlow": {
                    "totalIn": "807710101658",
                    "totalOut": "0"
                },
                "pending": {
                    "timestamp": 0,
                    "native": false,
                    "amount": "0",
                    "exemption": "0"
                }
            }
        },
        "input": {
            "instrumentAddress": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
            "traderAddress": "0xA2917847890331339965af22Cc76d90E8fA23552",
            "baseQuantity": "10000000000000000",
            "side": 1,
            "targetLeverage": "3000000000000000000",
            "userSetting": {
                "deadline": 3600,
                "slippage": 75
            }
        },
        "expected": {
            "simulation": {
                "marginDelta": "529947449259793280",
                "leverage": "3000000000000000000",
                "realized": "0",
                "postPosition": {
                    "balance": "528871824906636487",
                    "size": "-10000000000000000",
                    "entryNotional": "1536606218795417835",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "9749087299161150366"
                },
                "exceedMaxLeverage": false
            }
        }
    },
    {
        "name": "abc-trade-close-short",
        "type": "close",
        "signedSize": "-8000000000000000",
        "quotation": {
            "benchmark": "153660000000000000000",
            "sqrtFairPX96": "982112590742975838296897558209",
            "tick": 50349,
            "mark": "153660000000000000000",
            "entryNotional": "1229285429929728140",
            "fee": "860499800950810",
            "minAmount": "123788499800950810",
            "sqrtPostFairPX96": "982111137031139640879691710541",
            "postTick": 50349
        },
        "context": {
            "setting": {
                "symbol": "SOL-USDM-EMG",
                "config": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "gate": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "market": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "initialMarginRatio": 1000,
                "maintenanceMarginRatio": 500,
                "placePaused": false,
                "fundingHour": 24,
                "disableOrderRebate": false,
                "param": {
                    "minMarginAmount": "1000000000000000000",
                    "tradingFeeRatio": 4,
                    "protocolFeeRatio": 3,
                    "qtype": 1,
                    "tip": "100000000000000000"
                }
            },
            "amm": {
                "expiry": 4294967295,
                "timestamp": 1763048109,
                "status": 1,
                "tick": 50349,
                "sqrtPX96": "982112590742975838296897558209",
                "liquidity": "66996789455639740773358",
                "totalLiquidity": "66996789455639740773358",
                "totalShort": "109097610137968958168699",
                "openInterests": "111731544618802760799420",
                "totalLong": "109000582125878083343020",
                "involvedFund": "5394610613004000000000000",
                "feeIndex": "1132480572284542413",
                "protocolFee": "129093054174985816444341",
                "longSocialLossIndex": "0",
                "shortSocialLossIndex": "0",
                "longFundingIndex": "2920812895983985913539",
                "shortFundingIndex": "9749087299161150366",
                "insuranceFund": "206207465512564296",
                "settlementPrice": "0"
            },
            "spacing": {
                "pearl": 1,
                "order": 1,
                "range": 50
            },
            "priceData": {
                "instrument": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "expiry": 4294967295,
                "markPrice": "154050000000000000000",
                "spotPrice": "154050000000000000000",
                "benchmarkPrice": "154050000000000000000",
                "feeder0": "0x82a185a13f22b1816593d7e7e2f4f5aeb305b31b",
                "feeder1": "0x0000000000000000000000000000000000000000",
                "feeder0UpdatedAt": "1763047806",
                "feeder1UpdatedAt": "0"
            },
            "blockInfo": {
                "height": 693605,
                "timestamp": 1763048109
            },
            "portfolio": {
                "oids": [],
                "rids": [],
                "position": {
                    "balance": "500000000000000000000",
                    "size": "-15000000000000000",
                    "entryNotional": "620000000000000000000",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "9738860647816918896"
                },
                "orders": [],
                "ranges": [],
                "ordersTaken": []
            },
            "quoteState": {
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "symbol": "USDM",
                "threshold": "2000000000",
                "reserve": "0",
                "balance": "274289898342",
                "allowance": "115792089237316195423570985008687907853269984665640564039457584007913129639935",
                "fundFlow": {
                    "totalIn": "807710101658",
                    "totalOut": "0"
                },
                "pending": {
                    "timestamp": 0,
                    "native": false,
                    "amount": "0",
                    "exemption": "0"
                }
            }
        },
        "input": {
            "instrumentAddress": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
            "traderAddress": "0xA2917847890331339965af22Cc76d90E8fA23552",
            "baseSize": "-8000000000000000",
            "userSetting": {
                "deadline": 3600,
                "slippage": 60
            }
        },
        "expected": {
            "simulation": {
                "marginDelta": "0",
                "leverage": "3170078011390334",
                "realized": "153399770163472",
                "postPosition": {
                    "balance": "499999292899969212662",
                    "size": "-23000000000000000",
                    "entryNotional": "621229285429929728140",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "9749087299161150366"
                },
                "exceedMaxLeverage": false
            }
        }
    },
    {
        "name": "abc-adjust-margin-in",
        "type": "adjustMargin",
        "context": {
            "setting": {
                "symbol": "SOL-USDM-EMG",
                "config": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "gate": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "market": "0xcab47625cc30a955dbebb0ff6b8852080e92ac85",
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "initialMarginRatio": 1000,
                "maintenanceMarginRatio": 500,
                "placePaused": false,
                "fundingHour": 24,
                "disableOrderRebate": false,
                "param": {
                    "minMarginAmount": "1000000000000000000",
                    "tradingFeeRatio": 4,
                    "protocolFeeRatio": 3,
                    "qtype": 1,
                    "tip": "100000000000000000"
                }
            },
            "amm": {
                "expiry": 4294967295,
                "timestamp": 1763048109,
                "status": 1,
                "tick": 50349,
                "sqrtPX96": "982112590742975838296897558209",
                "liquidity": "66996789455639740773358",
                "totalLiquidity": "66996789455639740773358",
                "totalShort": "109097610137968958168699",
                "openInterests": "111731544618802760799420",
                "totalLong": "109000582125878083343020",
                "involvedFund": "5394610613004000000000000",
                "feeIndex": "1132480572284542413",
                "protocolFee": "129093054174985816444341",
                "longSocialLossIndex": "0",
                "shortSocialLossIndex": "0",
                "longFundingIndex": "2920812895983985913539",
                "shortFundingIndex": "9749087299161150366",
                "insuranceFund": "206207465512564296",
                "settlementPrice": "0"
            },
            "spacing": {
                "pearl": 1,
                "order": 1,
                "range": 50
            },
            "priceData": {
                "instrument": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
                "expiry": 4294967295,
                "markPrice": "154050000000000000000",
                "spotPrice": "154050000000000000000",
                "benchmarkPrice": "154050000000000000000",
                "feeder0": "0x82a185a13f22b1816593d7e7e2f4f5aeb305b31b",
                "feeder1": "0x0000000000000000000000000000000000000000",
                "feeder0UpdatedAt": "1763047806",
                "feeder1UpdatedAt": "0"
            },
            "blockInfo": {
                "height": 693605,
                "timestamp": 1763048109
            },
            "portfolio": {
                "oids": [],
                "rids": [],
                "position": {
                    "balance": "400000000000000000000",
                    "size": "12000000000000000",
                    "entryNotional": "610000000000000000000",
                    "entrySocialLossIndex": "0",
                    "entryFundingIndex": "2920823129133826328134"
                },
                "orders": [],
                "ranges": [],
                "ordersTaken": []
            },
            "quoteState": {
                "quote": "0x8da593b1084727dd82212a0b812415851f29cdec",
                "decimals": 6,
                "symbol": "USDM",
                "threshold": "2000000000",
                "reserve": "0",
                "balance": "274289898342",
                "allowance": "115792089237316195423570985008687907853269984665640564039457584007913129639935",
                "fundFlow": {
                    "totalIn": "807710101658",
                    "totalOut": "0"
                },
                "pending": {
                    "timestamp": 0,
                    "native": false,
                    "amount": "0",
                    "exemption": "0"
                }
            }
        },
        "input": {
            "instrumentAddress": "0x4ca5dc03807690b400a057acbe25d439fe2e7839",
            "traderAddress": "0xA2917847890331339965af22Cc76d90E8fA23552",
            "amount": "25000000000000000000",
            "transferIn": true,
            "userSetting": {
                "deadline": 1800,
                "slippage": 0
            }
        },
        "expected": {
            "simulation": {
                "positionMargin": "425000000000000000000",
                "leverage": "0",
                "liquidationPrice": "16228080947175270611842"
            }
        }
    }
]
